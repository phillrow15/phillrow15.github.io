<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>しぐれういビデオ</title>
  <link rel="icon" href="main_icon.png" type="image/png">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --card-padding: 20px;
      --card-radius: 10px;
      --shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    body{
      font-family: Arial, sans-serif;
      background:#f4f4f4;
      color:#222;
      padding:32px;
      text-align:center;
    }

    h1{ margin-bottom:18px; }

    /* Video card */
    .video-card{
      max-width:800px;
      margin:24px auto;
      background:#fff;
      padding:var(--card-padding);
      border-radius:var(--card-radius);
      box-shadow:var(--shadow);
    }

    .video-title{ margin:0 0 12px; font-size:1.05rem; }

    /* Stage keeps 16:9 ratio responsively */
    .video-stage{
      position:relative;
      width:100%;
      padding-top:56.25%; /* 16:9 */
      border-radius:calc(var(--card-radius) - 2px);
      overflow:hidden;
      background: #000;
    }

    /* Thumbnail image and iframe both fill the stage */
    .stage-media{
      position:absolute;
      top:0; left:0;
      width:100%; height:100%;
      object-fit:cover;
      display:block;
      border:0;
      border-radius:inherit;
    }

    .thumbnail{
      display:block;
      width:100%;
      height:100%;
      object-fit:cover;
      cursor:pointer;
    }

    /* Play button overlay (keyboard accessible) */
    .play-btn{
      position:absolute;
      top:50%; left:50%;
      transform:translate(-50%,-50%);
      z-index:5;
      border:0;
      background: rgba(0,0,0,0.45);
      color:white;
      font-size:34px;
      width:88px; height:88px;
      border-radius:50%;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      box-shadow: 0 6px 20px rgba(0,0,0,0.25);
    }
    .play-btn:focus{ outline:3px solid rgba(255,255,255,0.25); }

    /* iframe styles (created dynamically) */
    .video-iframe{
      position:absolute;
      top:0; left:0;
      width:100%; height:100%;
      border:0;
      border-radius:inherit;
      display:block;
    }

    /* hidden helper */
    .hidden{ display:none !important; }

    /* small note link */
    .open-link{ display:inline-block; margin-top:10px; font-size:.9rem; color:#0073e6; text-decoration:none; }
  </style>
</head>
<body>

  <h1>🎬 Welcome to Shigure UI video's Page (not official)</h1>

  <!-- Template for each video card: data-src must be the Drive /preview URL -->
  <div class="video-card" data-src="https://drive.google.com/file/d/1Mw5N5HFRMkLBArHEDme8Oh9OqVX-3Em_/preview">
    <h2 class="video-title">しぐれういの初配信ですhello！</h2>
    <div class="video-stage">
      <img class="stage-media thumbnail" src="thumbnail_1.png" alt="しぐれういの初配信です thumbnail">
      <button class="play-btn" aria-label="Play しぐれういの初配信です">▶</button>
      <!-- iframe will be created here when user clicks -->
    </div>
    <a class="open-link" href="#" target="_blank" rel="noopener" aria-hidden="true">Open in Drive</a>
  </div>

  <div class="video-card" data-src="https://drive.google.com/file/d/1JN_y3zfT7VON5RxUSWdMEJbW5mvIIInw/preview">
    <h2 class="video-title">お話しながらお絵かきする【#01】</h2>
    <div class="video-stage">
      <img class="stage-media thumbnail" src="thumbnail_2.png" alt="お話しながらお絵かきする thumbnail">
      <button class="play-btn" aria-label="Play お話しながらお絵かきする【#01】">▶</button>
    </div>
    <a class="open-link" href="#" target="_blank" rel="noopener" aria-hidden="true">Open in Drive</a>
  </div>

  <div class="video-card" data-src="https://drive.google.com/file/d/1FRJFWxE_FJ-RetgwHJ8P8um9YkTY-agW/preview">
    <h2 class="video-title">ありがとうを言いながらお絵かきする【#02】</h2>
    <div class="video-stage">
      <img class="stage-media thumbnail" src="thumbnail_3.png" alt="ありがとうを言いながらお絵かきする thumbnail">
      <button class="play-btn" aria-label="Play ありがとうを言いながらお絵かきする【#02】">▶</button>
    </div>
    <a class="open-link" href="#" target="_blank" rel="noopener" aria-hidden="true">Open in Drive</a>
  </div>

  <div class="video-card" data-src="https://drive.google.com/file/d/1hjVpQ098riPaGuBHujT4ZtoMbc86PpZ-/preview">
    <h2 class="video-title">【作業雑談】仕事をするのでお話相手になってほしい</h2>
    <div class="video-stage">
      <img class="stage-media thumbnail" src="thumbnail_4.png" alt="作業雑談 thumbnail">
      <button class="play-btn" aria-label="Play 作業雑談">▶</button>
    </div>
    <a class="open-link" href="#" target="_blank" rel="noopener" aria-hidden="true">Open in Drive</a>
  </div>

  <div class="video-card" data-src="https://drive.google.com/file/d/1X8fVpp7JmvkKjktIhvK5Akm2N2oje_Je/preview">
    <h2 class="video-title">告知をしたいしぐれうい【＋雑談】</h2>
    <div class="video-stage">
      <img class="stage-media thumbnail" src="thumbnail_5.png" alt="告知をしたいしぐれうい thumbnail">
      <button class="play-btn" aria-label="Play 告知をしたいしぐれうい">▶</button>
    </div>
    <a class="open-link" href="#" target="_blank" rel="noopener" aria-hidden="true">Open in Drive</a>
  </div>

  <div class="video-card" data-src="https://drive.google.com/file/d/10Uo6gK4WPtMgmuKgHRoG0sOHg1olwMy7/preview">
    <h2 class="video-title">夏コミや新衣装のお話がしたい！</h2>
    <div class="video-stage">
      <img class="stage-media thumbnail" src="thumbnail_6.png" alt="夏コミや新衣装 thumbnail">
      <button class="play-btn" aria-label="Play 夏コミや新衣装のお話がしたい！">▶</button>
    </div>
    <a class="open-link" href="#" target="_blank" rel="noopener" aria-hidden="true">Open in Drive</a>
  </div>

  <div class="video-card" data-src="https://drive.google.com/file/d/1kVCky8bmpOHkrXGUuh-9dCEMLykDH7CU/preview">
    <h2 class="video-title">【Project Winter】犯人じゃないです！信じてください！【しぐれうい視点】</h2>
    <div class="video-stage">
      <img class="stage-media thumbnail" src="thumbnail_7.png" alt="Project Winter thumbnail">
      <button class="play-btn" aria-label="Play Project Winter">▶</button>
    </div>
    <a class="open-link" href="#" target="_blank" rel="noopener" aria-hidden="true">Open in Drive</a>
  </div>

  <div class="video-card" data-src="https://drive.google.com/file/d/1KEBaYht3tdZWA_RKT62g5lF6IaA3Vdqe/preview">
    <h2 class="video-title">【雑談】まったりお話させておくれよ</h2>
    <div class="video-stage">
      <img class="stage-media thumbnail" src="thumbnail_8.png" alt="雑談 thumbnail">
      <button class="play-btn" aria-label="Play 雑談">▶</button>
    </div>
    <a class="open-link" href="#" target="_blank" rel="noopener" aria-hidden="true">Open in Drive</a>
  </div>

<script>
  // Helper: create iframe element for a given src
  function createIframe(src){
    const iframe = document.createElement('iframe');
    iframe.className = 'video-iframe';
    iframe.setAttribute('allow', 'autoplay; encrypted-media; fullscreen');
    iframe.setAttribute('allowfullscreen', '');
    iframe.loading = 'lazy';
    // Attempt to hint autoplay; Drive preview may not obey this param but it's harmless
    iframe.src = src + (src.includes('?') ? '&' : '?') + 'autoplay=1';
    return iframe;
  }

  // Stop a card (remove iframe if present and show thumbnail again)
  function stopCard(card){
    const stage = card.querySelector('.video-stage');
    const existingIframe = stage.querySelector('iframe.video-iframe');
    if(existingIframe){
      existingIframe.remove(); // removing stops playback
    }
    const thumb = stage.querySelector('.thumbnail');
    const playBtn = stage.querySelector('.play-btn');
    if(thumb) thumb.classList.remove('hidden');
    if(playBtn) playBtn.classList.remove('hidden');
    // restore open-link visibility
    const openLink = card.querySelector('.open-link');
    if(openLink) openLink.setAttribute('aria-hidden','true');
  }

  // Play a card: stop others, inject iframe into this card
  function playCard(card){
    // stop all other cards first
    document.querySelectorAll('.video-card').forEach(c => {
      if(c !== card) stopCard(c);
    });

    const stage = card.querySelector('.video-stage');
    const thumb = stage.querySelector('.thumbnail');
    const playBtn = stage.querySelector('.play-btn');
    const src = card.getAttribute('data-src');

    // safety: if already playing, do nothing
    if(stage.querySelector('iframe.video-iframe')) return;

    // hide thumbnail and play button
    if(thumb) thumb.classList.add('hidden');
    if(playBtn) playBtn.classList.add('hidden');

    // create and insert iframe
    const iframe = createIframe(src);
    iframe.addEventListener('error', () => {
      // if iframe fails, restore thumbnail and show link
      stopCard(card);
      const openLink = card.querySelector('.open-link');
      if(openLink){
        openLink.href = src;
        openLink.setAttribute('aria-hidden','false');
        openLink.focus();
      } else {
        window.open(src, '_blank', 'noopener');
      }
    });
    stage.appendChild(iframe);

    // set the "Open in Drive" link for fallback
    const openLink = card.querySelector('.open-link');
    if(openLink){
      openLink.href = src;
      openLink.setAttribute('aria-hidden','true');
    }
  }

  // Wire up controls
  document.querySelectorAll('.video-card').forEach(card => {
    const playBtn = card.querySelector('.play-btn');
    const stage = card.querySelector('.video-stage');

    // click or button activation
    playBtn.addEventListener('click', (ev) => {
      ev.stopPropagation();
      playCard(card);
    });

    // keyboard: Enter / Space on button will trigger click by default; add stage click too
    stage.addEventListener('click', (ev) => {
      // clicking anywhere on the stage also plays
      // but ignore clicks if they are on a link or already playing iframe
      const targetIsIframe = !!stage.querySelector('iframe.video-iframe');
      if(!targetIsIframe){
        playCard(card);
      }
    });

    // make open-link visible when iframe couldn't be created / or when user wants to open
    const openLink = card.querySelector('.open-link');
    openLink.addEventListener('click', (ev) => {
      // if iframe is playing, let link open in new tab; otherwise follow to drive
      // no special handling needed — link has target="_blank"
    });
  });

  // Optional: stop all videos when navigating away from page
  window.addEventListener('pagehide', () => {
    document.querySelectorAll('.video-card').forEach(stopCard);
  });
</script>

</body>
</html>
